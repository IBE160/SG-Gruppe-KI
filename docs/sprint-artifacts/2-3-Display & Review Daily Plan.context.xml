<story-context id="2-3-display-review-daily-plan" v="1.0">
  <metadata>
    <epicId>2</epicId>
    <storyId>3</storyId>
    <title>Display & Review Daily Plan</title>
    <status>drafted</status>
    <generatedAt>2025-12-15</generatedAt>
    <generator>BMAD Story Context Workflow (Regenerated)</generator>
    <sourceStoryPath>docs/sprint-artifacts/2-3-Display & Review Daily Plan.md</sourceStoryPath>
  </metadata>
  <story>
    <asA>user</asA>
    <iWant>to review the AI-generated daily workout plan, including any adaptations, and have the option to confirm or edit it</iWant>
    <soThat>I maintain control over my training.</soThat>
    <tasks>
      - [ ] **Task 1: Implement Plan Review UI Component (AC: 1, 2, 3)**
      - [ ] **Task 2: Implement Plan Review State Management**
      - [ ] **Task 3: Implement Plan Fetching and Confirmation Logic (AC: 4, 6, 7)**
      - [ ] **Task 4: Implement Backend Endpoints for Plan Review and Confirmation (AC: 6, 7)**
      - [ ] **Task 5: E2E Testing**
    </tasks>
  </story>
  <acceptanceCriteria>
    <criterion>AC2.3.1: The AI-generated plan is displayed to the user in a clear, readable format.</criterion>
    <criterion>AC2.3.2: Any AI adaptations are visually highlighted with the corresponding explanation.</criterion>
    <criterion>AC2.3.3: The user has options to [ Confirm Plan ] or [ Edit Plan ].</criterion>
  </acceptanceCriteria>
  <artifacts>
    <docs>
        <doc>
            <path>docs/architecture.md</path>
            <title>Architecture</title>
            <section>Novel Architectural Patterns</section>
            <snippet>This story implements the "Plan Review UI" component of the "Adaptive Workout Dialogue" pattern...</snippet>
        </doc>
        <doc>
            <path>docs/ux-design-direction.md</path>
            <title>UX Design Direction</title>
            <section>Flow 6: Generate AI Daily Plan</section>
            <snippet>The UI for the Plan Review should be based on Flow 6, Screen 3 - screen_3/code.html...</snippet>
        </doc>
    </docs>
    <code>
      <!-- No existing code artifacts found relevant to this story. -->
    </code>
  </artifacts>
  <constraints>
    <constraint>Frontend-Backend Contract: Ensure the structure of the fetched plan from GET /plans/{planId} and the confirmed plan data matches the agreed-upon API contract.</constraint>
    <constraint>Plan Editing: The "Edit Plan" functionality (AC 3) may involve a complex UI and backend logic. For this story, focus on the display and confirmation. Actual plan editing can be scoped as a separate, subsequent story if needed.</constraint>
  </constraints>
  <interfaces>
      <interface>
        <name>Get Plan</name>
        <kind>REST Endpoint</kind>
        <signature>GET /plans/{planId}</signature>
        <path>apps/api/app/api/plans.py</path>
      </interface>
      <interface>
        <name>Confirm Plan</name>
        <kind>REST Endpoint</kind>
        <signature>POST /plans/{planId}/confirm</signature>
        <path>apps/api/app/api/plans.py</path>
      </interface>
  </interfaces>
  <tests>
      <standards>Jest/React Testing Library for frontend UI, Playwright for E2E tests covering plan display, review, and confirmation.</standards>
      <locations><location>apps/web/src/components/PlanReview/</location></locations>
      <ideas>
          <idea>Unit test the PlanReview component to verify rendering of plan details and AI adaptations.</idea>
          <idea>E2E test the flow of a user reviewing a plan, confirming it, and seeing the confirmation screen.</idea>
      </ideas>
  </tests>
</story-context>